if (self.CavalryLogger) { CavalryLogger.start_js(["9YX7L"]); }

__d("HostnameRewriter",["URI","isFacebookURI","lowerFacebookDomain"],(function(a,b,c,d,e,f){var g,h=function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},i=null,j=null,k=new RegExp("^(.*(?:channel-proxy|edge-chat).*)\\.(facebook\\.com)$","i"),l=new RegExp("facebook\\.com$"),m=new RegExp("^www\\.(|.*\\.)facebook\\.com$"),n=null,o="facebook.com",p=!1,q=!1,r=new RegExp("facebookcorewwwi\\.onion$"),s=new RegExp("facebookcorewwwi\\.testonion$"),t=new RegExp("fbcdn\\.net$"),u="fbcdn23dssr3jqnq.onion",v="fbcdn23dssr3jqnq.testonion",w=new RegExp("^www\\."),x=new RegExp("(^|\\.)(facebook\\.com|workplace\\.com)$","i");function y(a){i=null;a?a="(^|\\.)":a="^";n=a+h(o)+"$";j=null}function z(){if(n==null)return null;if(i)return i;i=new RegExp(n,"i");return i}function A(){if(j)return j;j=new RegExp("(^|\\.)("+h(o)+"|facebook\\.com)$","i");return j}function B(){return function(a){a=new(g||(g=b("URI")))(a);var c=k.exec(a.getDomain());if(!c||c.length<3)return a;a.setDomain("edge-chat."+c[2]);return a}}function C(){return function(a){a=new(g||(g=b("URI")))(a);A().test(a.getDomain())&&a.setProtocol("https");return a}}function D(){return function(a){a=new(g||(g=b("URI")))(a);var c=a.getDomain();A().test(c)&&o!=null?a.setDomain(c.replace(l,o)):p&&c!==null?a.setDomain(c.replace(t,u)):q&&c!==null&&a.setDomain(c.replace(t,v));return a}}function E(){return function(a){a=new(g||(g=b("URI")))(a);var c=a.getDomain();m.test(c)&&a.setDomain(c.replace(w,"web."));return a}}a={registerFacebookFilters:function(a,c){o=a,p=o!=null&&r.test(o),q=o!=null&&s.test(o),y(c),b("isFacebookURI").setRegex(z()),(g||(g=b("URI"))).registerFilter(B()),g.registerFilter(C()),g.registerFilter(D()),b("lowerFacebookDomain").setDomain(o)},registerInternetDotOrgFilters:function(a,c){o=a,(g||(g=b("URI"))).registerFilter(E())},treatWorkplaceAsFacebookURI:function(){b("isFacebookURI").setRegex(x)}};e.exports=a}),null);
__d("BlueCompatDarkMode",["cx","BlueCompatBroker","CSS","Run"],(function(a,b,c,d,e,f,g){"use strict";var h={setDarkMode:function(){document.body?b("CSS").addClass(document.body,"_8bb_"):b("Run").onAfterLoad(function(){document.body&&b("CSS").addClass(document.body,"_8bb_")})},unsetDarkMode:function(){document.body&&b("CSS").removeClass(document.body,"_8bb_")}};b("BlueCompatBroker").init();b("BlueCompatBroker").register("dark-mode",function(a){a=b("BlueCompatBroker").getMessageEventString(a,"enabled");a==="true"?h.setDarkMode():h.unsetDarkMode()});e.exports=h}),null);
__d("ContextualLayerAsyncRelative",["Event","Parent"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this._layer=a}var c=a.prototype;c.enable=function(){this._layerSubscription=this._layer.subscribe("show",this._attachListener.bind(this)),this._layer.isShown()&&this._attachListener()};c.disable=function(){this._layerSubscription.unsubscribe(),this._layerSubscription=null,this._listener&&(this._listener.remove(),this._listener=null)};c._attachListener=function(){this._listener=b("Event").listen(this._layer.getRoot(),"click",this._onclick.bind(this))};c._onclick=function(a){var c=b("Parent").byTag(a.getTarget(),"A");if(!c)return;a=c.getAttribute("ajaxify");var e=c.href,f=a||e;if(c.rel==="async"||c.rel==="async-post"){d(["AsyncRequest"],function(a){a.bootstrap(f,this._layer.getContext(),c.rel==="async-post")}.bind(this));return!1}};return a}();Object.assign(a.prototype,{_layerSubscription:null,_listener:null});e.exports=a}),null);